<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Compass</title>
<link rel="stylesheet" href="./style.css">
<script src="https://kit.fontawesome.com/605a1dc14a.js" crossorigin="anonymous"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="930580119599-p51vgjujpe4m5ut8rn1ffbvo2bgv695b.apps.googleusercontent.com">
  </head>


<style>
  #profile-photo {
    position: absolute;
    z-index: 99999999999999;
    bottom: 0;
    left: 0;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    background: white;
  }
  #signin {
    position: absolute;
    z-index: 99999999999999;
    bottom: 0;
    right: 0;
  }
</style>


  <nav class="menu">
   <input type="checkbox" href="#" class="menu-open" name="menu-open" id="menu-open" />
   <label class="menu-open-button" for="menu-open">
    <span class="lines line-1"></span>
    <span class="lines line-2"></span>
    <span class="lines line-3"></span>
  </label>

   <a href="#" class="menu-item blue"> <i class="fa fa-anchor"></i> </a>
   <a href="#" class="menu-item green"> <i class="fa fa-coffee"></i> </a>
   <a href="#" class="menu-item red"> <i class="fa fa-heart"></i> </a>
   <a href="#" class="menu-item purple"> <i class="fa fa-microphone"></i> </a>
   <a href="#" class="menu-item orange"> <i class="fa fa-star"></i> </a>
   <a onclick="stopWatching()" class="menu-item lightblue"> <i class="fa fa-diamond"></i> </a>
</nav>


<body onload="initMap()">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANMlxs_5nMLgjNt-42_Jc2BMenN0bQwcg"></script>
  <script>
  function onSignIn(googleUser) {
    // Get the user's profile information
    var profile = googleUser.getBasicProfile();

    // Display the user's profile photo in the profile photo container
    var profilePhoto = document.getElementById('profile-photo');
    profilePhoto.style.backgroundImage = 'url(' + profile.getImageUrl() + ')';

  }
</script>

<script>
var map, marker, geofences, watchID, circle, counter;

function initMap() {
  // Initialize the map
  map = new google.maps.Map(document.getElementById('map'), {
    center: { lat: 39.0107, lng: -94.5322 }, // Swope Park
    zoom: 15,
    disableDefaultUI: true
  });

  // Add a marker to the map
  marker = new google.maps.Marker({
    position: { lat: 39.0107, lng: -94.5322 },
    map: map,
    title: 'Current Location'
  });

  // Create an array of geofences
  geofences = [
    {
      bounds: {
        north: 39.0120,
        south: 39.0107,
        east: -94.5315,
        west: -94.5322
      },
      alertText: 'You touched the first wall!'
    },
    {
      bounds: {
        north: 39.0114,
        south: 39.0094,
        east: -94.5315,
        west: -94.5303
      },
      alertText: 'You touched the second wall!'
    },
    {
      bounds: {
        north: 39.0094,
        south: 39.0079,
        east: -94.5303,
        west: -94.5322
      },
      alertText: 'You touched the third wall!'
    },
    {
      bounds: {
        north: 39.0079,
        south: 39.0073,
        east: -94.5322,
        west: -94.5335
      },
      alertText: 'You touched the fourth wall!'
    },
    {
      bounds: {
        north: 39.0073,
        south: 39.0068,
        east: -94.5335,
        west: -94.5346
      },
      alertText: 'You touched the fifth wall!'
    }
  ];

  // Create the geofences
  geofences.forEach(function (geofence) {
    new google.maps.Rectangle({
      bounds: geofence.bounds,
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: '#FF0000',
      fillOpacity: 0.35,
      map: map
    });
  });
}


counter = 0; // initialize the counter to 0

// Create the geofences
const geofences = [
  {
    bounds: {
      north: 39.0112,
      south: 39.0107,
      east: -94.5318,
      west: -94.5325
    },
    alertText: "You hit the northern boundary!"
  },
  {
    bounds: {
      north: 39.0107,
      south: 39.0057,
      east: -94.5318,
      west: -94.5325
    },
    alertText: "You hit the western boundary!"
  },
  {
    bounds: {
      north: 39.0112,
      south: 39.0057,
      east: -94.5313,
      west: -94.5318
    },
    alertText: "You hit the southern boundary!"
  },
  {
    bounds: {
      north: 39.0107,
      south: 39.007,
      east: -94.5313,
      west: -94.5288
    },
    alertText: "You hit the eastern boundary!"
  }
];

// Create the geofence rectangles
const rectangles = geofences.map(function(geofence) {
  const rectangle = new google.maps.Rectangle({
    bounds: geofence.bounds,
    strokeColor: "#FF0000",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#FF0000",
    fillOpacity: 0.35,
    map: map
  });

  // Add a listener to the rectangle
  google.maps.event.addListener(rectangle, "click", function() {
    alert(geofence.alertText);
  });

  return rectangle;
});

// Create the circle
const circle = new google.maps.Circle({
  center: { lat: 39.0057, lng: -94.5288 },
  radius: 50,
  strokeColor: "blue",
  strokeOpacity: 0.8,
  strokeWeight: 2,
  fillColor: "blue",
  fillOpacity: 0.35,
  map: map
});

// Add a listener to the circle
google.maps.event.addListener(circle, "click", function() {
  const distance = google.maps.geometry.spherical.computeDistanceBetween(
    marker.getPosition(),
    circle.getCenter()
  );

  if (distance <= 50) {
    counter = 1;
  } else if (distance > 50 && distance <= 100) {
    counter = 2;
  } else if (distance > 100 && distance <= 150) {
    counter = 3;
  } else if (distance > 150 && distance <= 200) {
    counter = 4;
  } else if (distance > 200 && distance <= 250) {
    counter = 5;
    alert("You have reached the circle!");
  } else {
    counter = 0;
  }

  console.log("Counter: " + counter);
});



</script>

<div id="profile-photo"></div>
<div id="signin"><div class="g-signin2" data-onsuccess="onSignIn"></div></div>

  <div id="map" style="height: 100vh;"></div>


</body>

</html>
