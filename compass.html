<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Compass</title>
<link rel="stylesheet" href="./style.css">
<script src="https://kit.fontawesome.com/605a1dc14a.js" crossorigin="anonymous"></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="930580119599-p51vgjujpe4m5ut8rn1ffbvo2bgv695b.apps.googleusercontent.com">
  </head>


<style>
  #profile-photo {
    position: absolute;
    z-index: 99999999999999;
    bottom: 0;
    left: 0;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    background: white;
  }
  #signin {
    position: absolute;
    z-index: 99999999999999;
    bottom: 0;
    right: 0;
  }
  #counter {
    background-color: green;
  }
  #counter.counter-1 {
    background-color: yellow;
  }
  #counter.counter-2 {
    background-color: orange;
  }
  #counter.counter-3 {
    background-color: darkorange;
  }
  #counter.counter-4 {
    background-color: crimson;
  }
  #counter.counter-5 {
    background-color: red;
  }
</style>


  <nav class="menu">
   <input type="checkbox" href="#" class="menu-open" name="menu-open" id="menu-open" />
   <label class="menu-open-button" for="menu-open">
    <span class="lines line-1"></span>
    <span class="lines line-2"></span>
    <span class="lines line-3"></span>
  </label>

   <a href="#" class="menu-item blue"> <i class="fa fa-anchor"></i> </a>
   <a href="#" class="menu-item green"> <i class="fa fa-coffee"></i> </a>
   <a href="#" class="menu-item red"> <i class="fa fa-heart"></i> </a>
   <a href="#" class="menu-item purple"> <i class="fa fa-microphone"></i> </a>
   <a href="#" class="menu-item orange"> <i class="fa fa-star"></i> </a>
   <a onclick="stopWatching()" class="menu-item lightblue"> <i class="fa fa-diamond"></i> </a>
</nav>


<body onload="initMap()">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANMlxs_5nMLgjNt-42_Jc2BMenN0bQwcg"></script>
  <script>
  function onSignIn(googleUser) {
    // Get the user's profile information
    var profile = googleUser.getBasicProfile();

    // Display the user's profile photo in the profile photo container
    var profilePhoto = document.getElementById('profile-photo');
    profilePhoto.style.backgroundImage = 'url(' + profile.getImageUrl() + ')';

    // TODO: Add logic to handle the user's authentication status
  }
</script>

<script>
var map, marker, geofences, watchID, circle, counter;

function initMap() {
  // Initialize the map
  map = new google.maps.Map(document.getElementById('map'), {
    center: { lat: 39.0107, lng: -94.5322 }, // Swope Park
    zoom: 15,
    disableDefaultUI: true
  });

  // Add a marker to the map
  marker = new google.maps.Marker({
    position: { lat: 39.0107, lng: -94.5322 },
    map: map,
    title: 'Current Location'
  });

  // Create an array of geofences
  geofences = [
    {
      center: { lat: 39.0115, lng: -94.5465 },
      radius: 100, // in meters
      strokeColor: 'brown',
      strokeOpacity: 0.3,
      strokeWeight: 4,
      fillColor: 'brown',
      fillOpacity: 0.2,
      alertRadius: 100,
      alertText: 'You found the circle!'
    },
    {
      center: { lat: 39.0130, lng: -94.5472 },
      radius: 200, // in meters
      strokeColor: 'black',
      strokeOpacity: 0.3,
      strokeWeight: 4,
      fillColor: 'black',
      fillOpacity: 0.2,
      alertRadius: 200,
      alertText: 'You died during the haunt!'
    },
    {
      center: { lat: 39.0127, lng: -94.5452 },
      radius: 100, // in meters
      strokeColor: '#00FF00',
      strokeOpacity: 0.3,
      strokeWeight: 4,
      fillColor: '#00FF00',
      fillOpacity: 0.2,
      alertRadius: 20,
      alertText: 'You have entered the park Haunt area!'
    },
    {
      center: { lat: 39.0140, lng: -94.5492 },
      radius: 200, // in meters
      strokeColor: '#0000FF',
      strokeOpacity: 0.3,
      strokeWeight: 4,
      fillColor: '#0000FF',
      fillOpacity: 0.2,
      alertRadius: 20,
      alertText: 'You are now inside the boss area!'
    }
  ];


  // Create the geofences
  geofences.forEach(function (geofence) {
    new google.maps.Circle({
      center: geofence.center,
      radius: geofence.radius,
      strokeColor: geofence.strokeColor,
      strokeOpacity: geofence.strokeOpacity,
      strokeWeight: geofence.strokeWeight,
      fillColor: geofence.fillColor,
      fillOpacity: geofence.fillOpacity,
      map: map
    });
  });

  // Add the circle to the map
  circle = new google.maps.Circle({
    center: { lat: 39.0107, lng: -94.5322 },
    radius: 50,
    strokeColor: 'red',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: 'red',
    fillOpacity: 0.35,
    map: map
  });

  // Initialize the counter
counter = 0;

// Watch the user's position
watchID = navigator.geolocation.watchPosition(function (position) {
// Update the marker's position
var latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
marker.setPosition(latLng);

// Check if the user is inside a geofence
geofences.forEach(function (geofence) {
var distance = google.maps.geometry.spherical.computeDistanceBetween(latLng, geofence.center);
if (distance <= geofence.alertRadius) {
alert(geofence.alertText);
}
});

// Check if the user is inside the circle
var distance = google.maps.geometry.spherical.computeDistanceBetween(latLng, circle.getCenter());
if (distance <= circle.getRadius()) {
counter++;
if (counter == 5) {
alert('You found the center of the circle!');
}
} else {
counter = 0;
}
});
}

// Get the div element
var counterDiv = document.getElementById("counter");

// Update the text content
counterDiv.textContent = "Counter: " + counter;

// Remove all counter classes
counterDiv.classList.remove("counter-1");
counterDiv.classList.remove("counter-2");
counterDiv.classList.remove("counter-3");
counterDiv.classList.remove("counter-4");
counterDiv.classList.remove("counter-5");

// Add the appropriate counter class
if (counter >= 1) {
  counterDiv.classList.add("counter-1");
}
if (counter >= 2) {
  counterDiv.classList.add("counter-2");
}
if (counter >= 3) {
  counterDiv.classList.add("counter-3");
}
if (counter >= 4) {
  counterDiv.classList.add("counter-4");
}
if (counter >= 5) {
  counterDiv.classList.add("counter-5");
}

</script>


<div id="counter" style="position: absolute; bottom: 80px; left: 0px; z-index: 999; background-color: green; color: white; padding: 5px;">EMF: 0</div>

<div id="profile-photo"></div>
<div id="signin"><div class="g-signin2" data-onsuccess="onSignIn"></div></div>

  <div id="map" style="height: 100vh;"></div>


</body>

</html>
