<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Compass</title>
<link rel="stylesheet" href="./style.css">
<script src="https://kit.fontawesome.com/605a1dc14a.js" crossorigin="anonymous"></script>

  </head>


<style>
  #profile-photo {
    position: absolute;
    z-index: 99999999999999;
    bottom: 0;
    left: 0;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    overflow: hidden;
  }
</style>


  <nav class="menu">
   <input type="checkbox" href="#" class="menu-open" name="menu-open" id="menu-open" />
   <label class="menu-open-button" for="menu-open">
    <span class="lines line-1"></span>
    <span class="lines line-2"></span>
    <span class="lines line-3"></span>
  </label>

   <a href="#" class="menu-item blue"> <i class="fa fa-anchor"></i> </a>
   <a href="#" class="menu-item green"> <i class="fa fa-coffee"></i> </a>
   <a href="#" class="menu-item red"> <i class="fa fa-heart"></i> </a>
   <a href="#" class="menu-item purple"> <i class="fa fa-microphone"></i> </a>
   <a href="#" class="menu-item orange"> <i class="fa fa-star"></i> </a>
   <a onclick="stopWatching()" class="menu-item lightblue"> <i class="fa fa-diamond"></i> </a>
</nav>


<body onload="initMap()">
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANMlxs_5nMLgjNt-42_Jc2BMenN0bQwcg"></script>
  <script>
  function onSignIn(googleUser) {
    // Get the user's profile information
    var profile = googleUser.getBasicProfile();

    // Display the user's profile photo in the profile photo container
    var profilePhoto = document.getElementById('profile-photo');
    profilePhoto.style.backgroundImage = 'url(' + profile.getImageUrl() + ')';

    // TODO: Add logic to handle the user's authentication status
  }
</script>

  <script>
      var map, marker, geofences, watchID;

      function initMap() {
          // Initialize the map
          map = new google.maps.Map(document.getElementById('map'), {
              center: { lat: 39.0107, lng: -94.5322 }, // Swope Park
              zoom: 15,
              disableDefaultUI: true
          });

          // Add a marker to the map
          marker = new google.maps.Marker({
              position: { lat: 39.0107, lng: -94.5322 },
              map: map,
              title: 'Current Location'
          });

          // Create an array of geofences
          geofences = [
              {
                  center: { lat: 39.0107, lng: -94.5322 },
                  radius: 200, // in meters
                  strokeColor: '#FF0000',
                  strokeOpacity: 0.8,
                  strokeWeight: 4,
                  fillColor: '#FF0000',
                  fillOpacity: 0.2,
                  alertRadius: 200,
                  alertText: 'You have entered the Q Area!'
              },
              {
                  center: { lat: 39.0127, lng: -94.5352 },
                  radius: 100, // in meters
                  strokeColor: '#00FF00',
                  strokeOpacity: 0.8,
                  strokeWeight: 4,
                  fillColor: '#00FF00',
                  fillOpacity: 0.2,
                  alertRadius: 10,
                  alertText: 'You are very close to the park entrance!'
              },
              {
                  center: { lat: 39.0097, lng: -94.5302 },
                  radius: 300, // in meters
                  strokeColor: '#0000FF',
                  strokeOpacity: 0.8,
                  strokeWeight: 4,
                  fillColor: '#0000FF',
                  fillOpacity: 0.2,
                  alertRadius: 200,
                  alertText: 'You have entered the playground area!'
              }
          ];

          // Create the geofences
          geofences.forEach(function (geofence) {
              new google.maps.Circle({
                  center: geofence.center,
                  radius: geofence.radius,
                  strokeColor: geofence.strokeColor,
                  strokeOpacity: geofence.strokeOpacity,
                  strokeWeight: geofence.strokeWeight,
                  fillColor: geofence.fillColor,
                  fillOpacity: geofence.fillOpacity,
                  map: map
              });
          });

          // Watch the user's location and check if they enter or leave the geofences
          watchID = navigator.geolocation.watchPosition(function (position) {
              var userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

              // Update the marker position
              marker.setPosition(userLocation);

              // Check if the user is inside or outside any of the geofences
              geofences.forEach(function (geofence) {
                  if (google.maps.geometry.spherical.computeDistanceBetween(userLocation, geofence.center) <= geofence.alertRadius) {
                      alert(geofence.alertText);
                  }
              });
          });
      }

      function stopWatching() {
          // Stop watching the user's location
          navigator.geolocation.clearWatch(watchID);
      }
  </script>
    <div id="map" style="height: 100vh;"></div>
  <div class="g-signin2" data-onsuccess="onSignIn"></div>
  <div id="profile-photo"></div>

  </body>

</html>
